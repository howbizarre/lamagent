<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tech Documentation ‚Äî lamagent Tools API</title>
  <style>
    :root {
      --bg-primary: #0d1117;
      --bg-secondary: #161b22;
      --bg-tertiary: #21262d;
      --border-primary: #30363d;
      --border-secondary: #21262d;
      --text-primary: #f0f6fc;
      --text-secondary: #8b949e;
      --text-muted: #656d76;
      --accent-primary: #58a6ff;
      --accent-secondary: #1f6feb;
      --accent-success: #3fb950;
      --accent-warning: #d29922;
      --code-bg: #0d1117;
      --code-border: #30363d;
      --syntax-keyword: #ff7b72;
      --syntax-string: #a5d6ff;
      --syntax-comment: #8b949e;
      --syntax-number: #79c0ff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      font-size: 14px;
    }

    header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-primary);
      padding: 16px 24px;
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand {
      font-weight: 600;
      font-size: 16px;
      color: var(--accent-primary);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .brand::before {
      content: "üìö";
      font-size: 18px;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .lang-toggle {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 6px;
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .lang-toggle label {
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    select {
      background: var(--bg-primary);
      color: var(--text-primary);
      border: 1px solid var(--border-primary);
      border-radius: 4px;
      padding: 4px 8px;
      font-size: 12px;
    }

    main {
      display: flex;
      min-height: calc(100vh - 65px);
    }

    .sidebar {
      width: 280px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-primary);
      overflow-y: auto;
    }

    .sidebar-content {
      padding: 20px;
    }

    .sidebar h3 {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .sidebar h3::before {
      content: "üîß";
      font-size: 14px;
    }

    .file-list {
      list-style: none;
    }

    .file-item {
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin-bottom: 4px;
      transition: all 0.15s ease;
      color: var(--text-secondary);
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .file-item::before {
      content: "üìÑ";
      font-size: 12px;
    }

    .file-item:hover {
      background: var(--bg-tertiary);
      color: var(--text-primary);
    }

    .file-item.active {
      background: var(--accent-secondary);
      color: white;
      font-weight: 500;
    }

    .content {
      flex: 1;
      overflow-y: auto;
      background: var(--bg-primary);
    }

    .doc-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 32px 24px;
    }

    .welcome {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-secondary);
    }

    .welcome h1 {
      color: var(--accent-primary);
      margin-bottom: 16px;
      font-size: 24px;
    }

    .welcome p {
      font-size: 16px;
      line-height: 1.6;
    }

    /* Markdown Content Styles */
    .markdown-content {
      line-height: 1.7;
    }

    .markdown-content h1 {
      font-size: 28px;
      font-weight: 600;
      color: var(--accent-primary);
      margin: 0 0 24px 0;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border-primary);
    }

    .markdown-content h2 {
      font-size: 22px;
      font-weight: 600;
      color: var(--text-primary);
      margin: 32px 0 16px 0;
      position: relative;
    }

    .markdown-content h2::before {
      content: "";
      position: absolute;
      left: -16px;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 20px;
      background: var(--accent-primary);
      border-radius: 2px;
    }

    .markdown-content h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin: 24px 0 12px 0;
    }

    .markdown-content h4 {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin: 20px 0 8px 0;
    }

    .markdown-content h5 {
      font-size: 14px;
      font-weight: 600;
      color: var(--accent-primary);
      margin: 16px 0 8px 0;
    }

    .markdown-content p {
      margin: 0 0 16px 0;
      color: var(--text-primary);
    }

    .markdown-content strong {
      font-weight: 600;
      color: var(--text-primary);
    }

    .markdown-content em {
      font-style: italic;
      color: var(--accent-primary);
    }

    .markdown-content code {
      background: var(--code-bg);
      border: 1px solid var(--code-border);
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      font-size: 12px;
      color: var(--syntax-string);
    }

    .markdown-content pre {
      background: var(--code-bg);
      border: 1px solid var(--code-border);
      border-radius: 8px;
      padding: 16px;
      margin: 16px 0;
      overflow-x: auto;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      font-size: 13px;
      line-height: 1.5;
    }

    .markdown-content pre code {
      background: none;
      border: none;
      padding: 0;
      color: var(--text-primary);
    }

    .markdown-content ul {
      margin: 0 0 16px 0;
      padding-left: 24px;
    }

    .markdown-content li {
      margin: 4px 0;
      color: var(--text-primary);
    }

    .markdown-content li::marker {
      color: var(--accent-primary);
    }

    .markdown-content hr {
      border: none;
      border-top: 1px solid var(--border-primary);
      margin: 32px 0;
    }

    .markdown-content blockquote {
      border-left: 4px solid var(--accent-primary);
      padding: 12px 16px;
      margin: 16px 0;
      background: var(--bg-secondary);
      border-radius: 0 6px 6px 0;
    }

    .markdown-content blockquote p {
      margin: 0;
      color: var(--text-secondary);
    }

    /* Type signatures and special formatting */
    .type-sig {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 6px;
      padding: 12px;
      margin: 12px 0;
      font-family: 'SFMono-Regular', Consolas, monospace;
      font-size: 13px;
      color: var(--syntax-string);
    }

    .access-badge {
      background: var(--accent-secondary);
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
      margin-left: 8px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      main {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border-primary);
      }
      
      .doc-container {
        padding: 20px 16px;
      }
    }

    footer {
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-primary);
      padding: 16px 24px;
      text-align: center;
      color: var(--text-muted);
      font-size: 12px;
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      lamagent Tools Documentation
    </div>
    <div class="controls">
      <div class="lang-toggle">
        <label>Language</label>
        <select id="langSelect">
          <option value="en">English</option>
          <option value="bg">–ë—ä–ª–≥–∞—Ä—Å–∫–∏</option>
        </select>
      </div>
    </div>
  </header>

  <main>
    <aside class="sidebar">
      <div class="sidebar-content">
        <h3>Source Files</h3>
        <ul class="file-list" id="fileList">
          <li class="file-item" data-file="math.tools">math.tools.ts</li>
          <li class="file-item" data-file="rag-sqlite.tools">rag-sqlite.tools.ts</li>
        </ul>
      </div>
    </aside>

    <section class="content">
      <div class="doc-container" id="docContainer">
        <div class="welcome">
          <h1>Welcome to lamagent Tools Documentation</h1>
          <p>Select a source file from the sidebar to view its comprehensive JSDoc-style API documentation. Toggle between English and Bulgarian using the language selector above.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Self-contained documentation viewer ¬∑ Generated from JSDoc comments ¬∑ No external dependencies
  </footer>

  <script>
    // Embedded documentation content (English + Bulgarian)
    const docs = {
      "math.tools": {
        en: `# math.tools.ts ‚Äî JSDoc API Documentation

## English

### Overview

This module exports four mathematical operation tools built with LlamaIndex's \`tool()\` function and Zod schema validation. Each tool accepts two numeric parameters via an object and returns the calculated result as a string. All tools include console logging for debugging purposes.

**Exported Tools:**
- \`sumNumbers\` ‚Äî Addition operation
- \`divideNumbers\` ‚Äî Division operation with zero-division protection  
- \`multiplyNumbers\` ‚Äî Multiplication operation
- \`subtractNumbers\` ‚Äî Subtraction operation

---

### sumNumbers

**Description:** A tool for adding two numbers together.

This tool provides addition functionality and should always be used when performing sum or addition operations. It accepts two numeric parameters and returns their sum as a string.

**Type Signature:**
\`\`\`typescript
sumNumbers.execute({ a: number, b: number }): string
\`\`\`

**Parameters:**
- \`a\` *(number)* ‚Äî The first number to add
- \`b\` *(number)* ‚Äî The second number to add

**Returns:** *(string)* ‚Äî The sum of the two numbers as a string

**Example:**
\`\`\`typescript
const result = sumNumbers.execute({ a: 5, b: 3 });
console.log(result); // "8"
\`\`\`

---

### divideNumbers

**Description:** A tool for dividing one number by another with error handling for division by zero.

This tool should always be used when division operations are required. It includes built-in validation to prevent division by zero errors and returns results as strings.

**Type Signature:**
\`\`\`typescript
divideNumbers.execute({ a: number, b: number }): string
\`\`\`

**Parameters:**
- \`a\` *(number)* ‚Äî The dividend (number to be divided)
- \`b\` *(number)* ‚Äî The divisor (number to divide by)

**Returns:** *(string)* ‚Äî The result of the division as a string, or an error message if division by zero is attempted

**Examples:**
\`\`\`typescript
// Valid division
divideNumbers.execute({ a: 10, b: 2 }); // Returns "5"

// Division by zero
divideNumbers.execute({ a: 10, b: 0 }); // Returns "Error: Cannot divide by zero"
\`\`\`

---

### multiplyNumbers

**Description:** A tool for multiplying two numbers together.

This tool provides a standardized way to perform multiplication operations with proper parameter validation and logging. It should always be used when multiplication is required.

**Type Signature:**
\`\`\`typescript
multiplyNumbers.execute({ a: number, b: number }): string
\`\`\`

**Parameters:**
- \`a\` *(number)* ‚Äî The first number to multiply
- \`b\` *(number)* ‚Äî The second number to multiply

**Returns:** *(string)* ‚Äî The result of the multiplication as a string

**Example:**
\`\`\`typescript
const result = multiplyNumbers.execute({ a: 5, b: 3 });
console.log(result); // "15"
\`\`\`

---

### subtractNumbers

**Description:** A tool for performing subtraction operations between two numbers.

This tool subtracts the second number (subtrahend) from the first number (minuend) and returns the result as a string. It includes logging for debugging purposes.

**Type Signature:**
\`\`\`typescript
subtractNumbers.execute({ a: number, b: number }): string
\`\`\`

**Parameters:**
- \`a\` *(number)* ‚Äî The minuend (number to subtract from)
- \`b\` *(number)* ‚Äî The subtrahend (number to be subtracted)

**Returns:** *(string)* ‚Äî The result of the subtraction as a string

**Example:**
\`\`\`typescript
// Subtract 5 from 10
const result = subtractNumbers.execute({ a: 10, b: 5 });
console.log(result); // "5"
\`\`\`

---

### Implementation Details

**Schema Validation:**
- All tools use \`z.coerce.number()\` for automatic type coercion and validation
- Parameters are validated at runtime before execution
- Invalid inputs will throw Zod validation errors

**Return Format:**
- All mathematical results are converted to strings using \`.toString()\`
- This ensures consistent output format across all tools
- Error messages are also returned as strings

**Logging:**
- Each tool logs its operation to console for debugging
- Format: \`MATH Tool [OPERATION]: Calculating [operation] of [a] and [b]\``,
        bg: `# math.tools.ts ‚Äî JSDoc API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ë—ä–ª–≥–∞—Ä—Å–∫–∏

### –ü—Ä–µ–≥–ª–µ–¥

–¢–æ–∑–∏ –º–æ–¥—É–ª –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞ —á–µ—Ç–∏—Ä–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∑–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏ —Å LlamaIndex \`tool()\` —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –∏ Zod —Å—Ö–µ–º–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è. –í—Å–µ–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–∏–µ–º–∞ –¥–≤–∞ —á–∏—Å–ª–æ–≤–∏ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä–∞ —á—Ä–µ–∑ –æ–±–µ–∫—Ç –∏ –≤—Ä—ä—â–∞ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—Ç–∞—Ç –∫–∞—Ç–æ –Ω–∏–∑. –í—Å–∏—á–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –≤–∫–ª—é—á–≤–∞—Ç –∫–æ–Ω–∑–æ–ª–Ω–æ –ª–æ–≥–≤–∞–Ω–µ –∑–∞ debugging.

**–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:**
- \`sumNumbers\` ‚Äî –û–ø–µ—Ä–∞—Ü–∏—è —Å—ä–±–∏—Ä–∞–Ω–µ
- \`divideNumbers\` ‚Äî –û–ø–µ—Ä–∞—Ü–∏—è –¥–µ–ª–µ–Ω–∏–µ —Å –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω—É–ª–∞
- \`multiplyNumbers\` ‚Äî –û–ø–µ—Ä–∞—Ü–∏—è —É–º–Ω–æ–∂–µ–Ω–∏–µ  
- \`subtractNumbers\` ‚Äî –û–ø–µ—Ä–∞—Ü–∏—è –∏–∑–≤–∞–∂–¥–∞–Ω–µ

---

### sumNumbers

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ —Å—ä–±–∏—Ä–∞–Ω–µ –Ω–∞ –¥–≤–µ —á–∏—Å–ª–∞.

–¢–æ–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Å–∏–≥—É—Ä—è–≤–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç –∑–∞ —Å—ä–±–∏—Ä–∞–Ω–µ –∏ –≤–∏–Ω–∞–≥–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ —Å—É–º–∞ –∏–ª–∏ —Å—ä–±–∏—Ä–∞–Ω–µ. –ü—Ä–∏–µ–º–∞ –¥–≤–∞ —á–∏—Å–ª–æ–≤–∏ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä–∞ –∏ –≤—Ä—ä—â–∞ —Ç—è—Ö–Ω–∞—Ç–∞ —Å—É–º–∞ –∫–∞—Ç–æ –Ω–∏–∑.

**–¢–∏–ø–æ–≤–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞:**
\`\`\`typescript
sumNumbers.execute({ a: number, b: number }): string
\`\`\`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- \`a\` *(number)* ‚Äî –ü—ä—Ä–≤–æ—Ç–æ —á–∏—Å–ª–æ –∑–∞ —Å—ä–±–∏—Ä–∞–Ω–µ
- \`b\` *(number)* ‚Äî –í—Ç–æ—Ä–æ—Ç–æ —á–∏—Å–ª–æ –∑–∞ —Å—ä–±–∏—Ä–∞–Ω–µ

**–í—Ä—ä—â–∞:** *(string)* ‚Äî –°—É–º–∞—Ç–∞ –Ω–∞ –¥–≤–µ—Ç–µ —á–∏—Å–ª–∞ –∫–∞—Ç–æ –Ω–∏–∑

**–ü—Ä–∏–º–µ—Ä:**
\`\`\`typescript
const result = sumNumbers.execute({ a: 5, b: 3 });
console.log(result); // "8"
\`\`\`

---

### divideNumbers

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –µ–¥–Ω–æ —á–∏—Å–ª–æ –Ω–∞ –¥—Ä—É–≥–æ —Å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏ –∑–∞ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω—É–ª–∞.

–¢–æ–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∏–Ω–∞–≥–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –¥–µ–ª–µ–Ω–∏–µ. –í–∫–ª—é—á–≤–∞ –≤–≥—Ä–∞–¥–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏ –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω—É–ª–∞ –∏ –≤—Ä—ä—â–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∫–∞—Ç–æ –Ω–∏–∑–æ–≤–µ.

**–¢–∏–ø–æ–≤–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞:**
\`\`\`typescript
divideNumbers.execute({ a: number, b: number }): string
\`\`\`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- \`a\` *(number)* ‚Äî –î–µ–ª–∏–º–æ—Ç–æ (—á–∏—Å–ª–æ—Ç–æ, –∫–æ–µ—Ç–æ —Å–µ –¥–µ–ª–∏)
- \`b\` *(number)* ‚Äî –î–µ–ª–∏—Ç–µ–ª—è—Ç (—á–∏—Å–ª–æ—Ç–æ, –Ω–∞ –∫–æ–µ—Ç–æ —Å–µ –¥–µ–ª–∏)

**–í—Ä—ä—â–∞:** *(string)* ‚Äî –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –æ—Ç –¥–µ–ª–µ–Ω–∏–µ—Ç–æ –∫–∞—Ç–æ –Ω–∏–∑, –∏–ª–∏ —Å—ä–æ–±—â–µ–Ω–∏–µ –∑–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –æ–ø–∏—Ç –∑–∞ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω—É–ª–∞

**–ü—Ä–∏–º–µ—Ä–∏:**
\`\`\`typescript
// –í–∞–ª–∏–¥–Ω–æ –¥–µ–ª–µ–Ω–∏–µ
divideNumbers.execute({ a: 10, b: 2 }); // –í—Ä—ä—â–∞ "5"

// –î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω—É–ª–∞
divideNumbers.execute({ a: 10, b: 0 }); // –í—Ä—ä—â–∞ "Error: Cannot divide by zero"
\`\`\`

---

### multiplyNumbers

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ —É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–≤–µ —á–∏—Å–ª–∞.

–¢–æ–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Å–∏–≥—É—Ä—è–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω –Ω–∞—á–∏–Ω –∑–∞ –∏–∑–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ —É–º–Ω–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—Ç–µ –∏ –ª–æ–≥–≤–∞–Ω–µ. –í–∏–Ω–∞–≥–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç –æ—Ç —É–º–Ω–æ–∂–µ–Ω–∏–µ.

**–¢–∏–ø–æ–≤–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞:**
\`\`\`typescript
multiplyNumbers.execute({ a: number, b: number }): string
\`\`\`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- \`a\` *(number)* ‚Äî –ü—ä—Ä–≤–æ—Ç–æ —á–∏—Å–ª–æ –∑–∞ —É–º–Ω–æ–∂–µ–Ω–∏–µ
- \`b\` *(number)* ‚Äî –í—Ç–æ—Ä–æ—Ç–æ —á–∏—Å–ª–æ –∑–∞ —É–º–Ω–æ–∂–µ–Ω–∏–µ

**–í—Ä—ä—â–∞:** *(string)* ‚Äî –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –æ—Ç —É–º–Ω–æ–∂–µ–Ω–∏–µ—Ç–æ –∫–∞—Ç–æ –Ω–∏–∑

**–ü—Ä–∏–º–µ—Ä:**
\`\`\`typescript
const result = multiplyNumbers.execute({ a: 5, b: 3 });
console.log(result); // "15"
\`\`\`

---

### subtractNumbers

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ –∏–∑–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –∏–∑–≤–∞–∂–¥–∞–Ω–µ –º–µ–∂–¥—É –¥–≤–µ —á–∏—Å–ª–∞.

–¢–æ–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏–∑–≤–∞–∂–¥–∞ –≤—Ç–æ—Ä–æ—Ç–æ —á–∏—Å–ª–æ (–∏–∑–≤–∞–∂–¥–∞–Ω–µ) –æ—Ç –ø—ä—Ä–≤–æ—Ç–æ —á–∏—Å–ª–æ (—É–º–∞–ª—è–µ–º–æ) –∏ –≤—Ä—ä—â–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ –∫–∞—Ç–æ –Ω–∏–∑. –í–∫–ª—é—á–≤–∞ –ª–æ–≥–≤–∞–Ω–µ –∑–∞ debugging —Ü–µ–ª–∏.

**–¢–∏–ø–æ–≤–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞:**
\`\`\`typescript
subtractNumbers.execute({ a: number, b: number }): string
\`\`\`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- \`a\` *(number)* ‚Äî –£–º–∞–ª—è–µ–º–æ—Ç–æ (—á–∏—Å–ª–æ—Ç–æ, –æ—Ç –∫–æ–µ—Ç–æ —Å–µ –∏–∑–≤–∞–∂–¥–∞)
- \`b\` *(number)* ‚Äî –ò–∑–≤–∞–∂–¥–∞–Ω–µ—Ç–æ (—á–∏—Å–ª–æ—Ç–æ, –∫–æ–µ—Ç–æ —Å–µ –∏–∑–≤–∞–∂–¥–∞)

**–í—Ä—ä—â–∞:** *(string)* ‚Äî –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –æ—Ç –∏–∑–≤–∞–∂–¥–∞–Ω–µ—Ç–æ –∫–∞—Ç–æ –Ω–∏–∑

**–ü—Ä–∏–º–µ—Ä:**
\`\`\`typescript
// –ò–∑–≤–∞–∂–¥–∞ 5 –æ—Ç 10
const result = subtractNumbers.execute({ a: 10, b: 5 });
console.log(result); // "5"
\`\`\`

---

### –î–µ—Ç–∞–π–ª–∏ –∑–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞

**–°—Ö–µ–º–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è:**
- –í—Å–∏—á–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∏–∑–ø–æ–ª–∑–≤–∞—Ç \`z.coerce.number()\` –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ –Ω–∞ —Ç–∏–ø–æ–≤–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏—Ç–µ —Å–µ –≤–∞–ª–∏–¥–∏—Ä–∞—Ç –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–∏ –∏–∑–≤—ä—Ä—à–≤–∞–Ω–µ
- –ù–µ–≤–∞–ª–∏–¥–Ω–∏ –≤—Ö–æ–¥–æ–≤–µ —â–µ —Ö–≤—ä—Ä–ª—è—Ç Zod validation –≥—Ä–µ—à–∫–∏

**–§–æ—Ä–º–∞—Ç –Ω–∞ –≤—Ä—ä—â–∞–Ω–µ:**
- –í—Å–∏—á–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ —Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞—Ç –≤ –Ω–∏–∑–æ–≤–µ —Å \`.toString()\`
- –¢–æ–≤–∞ –æ—Å–∏–≥—É—Ä—è–≤–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–Ω –∏–∑—Ö–æ–¥–µ–Ω —Ñ–æ—Ä–º–∞—Ç –∑–∞ –≤—Å–∏—á–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- –°—ä–æ–±—â–µ–Ω–∏—è—Ç–∞ –∑–∞ –≥—Ä–µ—à–∫–∏ —Å—ä—â–æ —Å–µ –≤—Ä—ä—â–∞—Ç –∫–∞—Ç–æ –Ω–∏–∑–æ–≤–µ

**–õ–æ–≥–≤–∞–Ω–µ:**
- –í—Å–µ–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ª–æ–≥–≤–∞ —Å–≤–æ—è—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ –∑–∞ debugging
- –§–æ—Ä–º–∞—Ç: \`MATH Tool [–û–ü–ï–†–ê–¶–ò–Ø]: Calculating [–æ–ø–µ—Ä–∞—Ü–∏—è] of [a] and [b]\``
      },
      "rag-sqlite.tools": {
        en: `# rag-sqlite.tools.ts ‚Äî JSDoc API Documentation

## English

### Overview

This module implements a comprehensive SQLite-backed vector store system for Retrieval-Augmented Generation (RAG). It provides document indexing, embedding caching, semantic search capabilities, and a high-level tool interface for AI agents to query documentation efficiently.

**Main Components:**
- \`SQLiteVectorStore\` ‚Äî Core class managing SQLite database and vector operations
- \`getOrCreateVectorStore()\` ‚Äî Singleton factory with incremental indexing
- \`ragSQLiteTool\` ‚Äî LlamaIndex tool wrapper for agent integration

**Key Features:**
- Persistent embedding storage in SQLite database
- Incremental document indexing with hash-based change detection
- Semantic similarity search using cosine similarity
- Graceful fallback to text-based search
- Bilingual support (English/Bulgarian)
- Memory-efficient chunking with configurable parameters

---

### SQLiteVectorStore Class

#### Constructor
\`\`\`typescript
constructor(dbPath: string = 'rag_cache.db')
\`\`\`
Creates a new vector store instance and initializes the SQLite database with required tables and indexes.

#### Core Methods

##### indexDocument(filePath: string, content: string): Promise<void>

**Description:** Indexes a document by splitting it into chunks and storing them in the database with embeddings.

This method performs the following operations:
1. Calculates a file hash to detect content changes
2. Checks if the document is already indexed with the same content
3. Removes existing records for the file if content has changed
4. Splits the content into manageable chunks
5. Processes chunks in batches to generate embeddings
6. Stores each chunk with its embedding in the database

**Parameters:**
- \`filePath\` *(string)* ‚Äî The absolute path to the file being indexed
- \`content\` *(string)* ‚Äî The text content of the file to be indexed

**Returns:** *(Promise<void>)* ‚Äî A promise that resolves when the indexing process is complete

**Error Handling:** Will log errors for individual chunk processing failures but continues with remaining chunks

**Example:**
\`\`\`typescript
await ragTool.indexDocument('/path/to/document.md', 'Document content here...');
\`\`\`

---

##### searchSimilar(query: string, topK?: number): Promise<SearchResult[]>

**Description:** Searches for documents similar to the given query using semantic similarity.

This method generates an embedding for the input query and compares it against all stored document embeddings using cosine similarity. Results are filtered to exclude very low relevance scores and sorted by similarity score in descending order.

**Type Definition:**
\`\`\`typescript
interface SearchResult {
  text: string;
  score: number;
  metadata: {
    file_name: string;
    file_path: string;
    chunk_index: number;
  };
}
\`\`\`

**Parameters:**
- \`query\` *(string)* ‚Äî The search query string to find similar documents for
- \`topK\` *(number)* ‚Äî Maximum number of most similar documents to return (default: 3)

**Returns:** *(Promise<SearchResult[]>)* ‚Äî Promise resolving to an array of similar documents with their similarity scores and metadata

**Behavior:**
- Only returns documents with similarity score > 0.1 to filter out irrelevant results
- Embedding comparison errors are logged and affected documents receive a score of 0
- Results are sorted by similarity score in descending order (highest first)
- Metadata includes file information and chunk index for document traceability

**Example:**
\`\`\`typescript
const results = await ragTool.searchSimilar("machine learning algorithms", 5);
console.log(results[0].text); // Most similar document text
console.log(results[0].score); // Similarity score (0-1)
console.log(results[0].metadata.file_name); // Source file name
\`\`\`

---

### ragSQLiteTool

**Description:** SQLite-based RAG (Retrieval-Augmented Generation) tool for fast documentation search.

This tool provides optimized search capabilities for AI agent and RAG system documentation using a vector database with persistent embedding caching. It supports queries in both Bulgarian and English and can answer questions about agent architecture, RAG implementation, vector stores, document processing, and other technical details.

**Tool Configuration:**
\`\`\`typescript
{
  name: 'ragSQLiteTool',
  description: 'Optimized SQLite RAG tool for fast search...',
  parameters: z.object({
    query: z.string().describe('The search query for documentation lookup.')
  })
}
\`\`\`

**Features:**
- Vector-based similarity search with configurable result count
- Persistent embedding caching for improved performance on repeated queries
- Multilingual support (Bulgarian and English)
- Fallback mechanism to simple text search if vector search fails
- Performance monitoring with execution time and relevance score tracking
- Configurable relevance threshold filtering (default: 0.2)

**Performance:**
- Significantly faster than non-cached approaches on repeated queries
- Returns top 3 most relevant results by default
- Filters results by relevance score to ensure quality

**Fallback Strategy:**
If the primary vector search fails, the tool automatically falls back to:
1. Simple text-based search in markdown files
2. Keyword matching for installation and prerequisite queries
3. Graceful error handling with informative messages

**Parameters:**
- \`query\` *(string)* ‚Äî The search query string for documentation lookup

**Returns:** *(string)* ‚Äî Combined text from the most relevant documentation sections with relevance scores

**Example:**
\`\`\`typescript
const result = await ragSQLiteTool.execute({ 
  query: "How to install wasm-pack prerequisites?" 
});
\`\`\``,
        bg: `# rag-sqlite.tools.ts ‚Äî JSDoc API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ë—ä–ª–≥–∞—Ä—Å–∫–∏

### –ü—Ä–µ–≥–ª–µ–¥

–¢–æ–∑–∏ –º–æ–¥—É–ª —Ä–µ–∞–ª–∏–∑–∏—Ä–∞ —Ü—è–ª–æ—Å—Ç–Ω–∞ SQLite-–±–∞–∑–∏—Ä–∞–Ω–∞ –≤–µ–∫—Ç–æ—Ä–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞ Retrieval-Augmented Generation (RAG). –û—Å–∏–≥—É—Ä—è–≤–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞–Ω–µ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏, –∫–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ embedding-–æ–≤–µ, –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –≤–∏—Å–æ–∫–æ –Ω–∏–≤–æ –∑–∞ AI –∞–≥–µ–Ω—Ç–∏ –∑–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∑–∞—è–≤—è–≤–∞–Ω–µ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.

**–û—Å–Ω–æ–≤–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- \`SQLiteVectorStore\` ‚Äî –û—Å–Ω–æ–≤–µ–Ω –∫–ª–∞—Å –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ –∏ –≤–µ–∫—Ç–æ—Ä–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
- \`getOrCreateVectorStore()\` ‚Äî –°–∏–Ω–≥—ä–ª—Ç–æ–Ω —Ñ–∞–±—Ä–∏–∫–∞ —Å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª–Ω–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞–Ω–µ
- \`ragSQLiteTool\` ‚Äî LlamaIndex –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–±–≤–∏–≤–∫–∞ –∑–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–∏

**–ö–ª—é—á–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ embedding-–æ–≤–µ –≤ SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω–∏
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª–Ω–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞–Ω–µ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏ —Å –¥–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏ –±–∞–∑–∏—Ä–∞–Ω–∞ –Ω–∞ hash
- –°–µ–º–∞–Ω—Ç–∏—á–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ –ø–æ –ø–æ–¥–æ–±–∏–µ –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ cosine similarity
- Graceful fallback –∫—ä–º —Ç–µ–∫—Å—Ç–æ–≤–æ —Ç—ä—Ä—Å–µ–Ω–µ
- –î–≤—É–µ–∑–∏—á–Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ (–∞–Ω–≥–ª–∏–π—Å–∫–∏/–±—ä–ª–≥–∞—Ä—Å–∫–∏)
- –ï—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–æ –ø–∞–º–µ—Ç chunking —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

---

### SQLiteVectorStore –ö–ª–∞—Å

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
\`\`\`typescript
constructor(dbPath: string = 'rag_cache.db')
\`\`\`
–°—ä–∑–¥–∞–≤–∞ –Ω–æ–≤–∞ vector store –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞ SQLite –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏ –∏ –∏–Ω–¥–µ–∫—Å–∏.

#### –û—Å–Ω–æ–≤–Ω–∏ –º–µ—Ç–æ–¥–∏

##### indexDocument(filePath: string, content: string): Promise<void>

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω–¥–µ–∫—Å–∏—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç –∫–∞—Ç–æ –≥–æ —Ä–∞–∑–¥–µ–ª—è –Ω–∞ —á–∞—Å—Ç–∏ –∏ –≥–∏ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –≤ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Å embedding-–æ–≤–µ.

–¢–æ–∑–∏ –º–µ—Ç–æ–¥ –∏–∑–≤—ä—Ä—à–≤–∞ —Å–ª–µ–¥–Ω–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
1. –ò–∑—á–∏—Å–ª—è–≤–∞ —Ñ–∞–π–ª–æ–≤ hash –∑–∞ –¥–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏ –≤ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ
2. –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ä—Ç –≤–µ—á–µ –µ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞–Ω —Å—ä—Å —Å—ä—â–æ—Ç–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ
3. –ü—Ä–µ–º–∞—Ö–≤–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏ –∑–∞–ø–∏—Å–∏ –∑–∞ —Ñ–∞–π–ª–∞ –∞–∫–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ —Å–µ –µ –ø—Ä–æ–º–µ–Ω–∏–ª–æ
4. –†–∞–∑–¥–µ–ª—è —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º–∏ —á–∞—Å—Ç–∏
5. –û–±—Ä–∞–±–æ—Ç–≤–∞ —á–∞—Å—Ç–∏—Ç–µ –≤ batches –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ embedding-–æ–≤–µ
6. –°—ä—Ö—Ä–∞–Ω—è–≤–∞ –≤—Å—è–∫–∞ —á–∞—Å—Ç —Å –Ω–µ–π–Ω–∏—è embedding –≤ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- \`filePath\` *(string)* ‚Äî –ê–±—Å–æ–ª—é—Ç–Ω–∏—è—Ç –ø—ä—Ç –∫—ä–º —Ñ–∞–π–ª–∞ –∫–æ–π—Ç–æ —Å–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞
- \`content\` *(string)* ‚Äî –¢–µ–∫—Å—Ç–æ–≤–æ—Ç–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ —Ñ–∞–π–ª–∞ –∑–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞–Ω–µ

**–í—Ä—ä—â–∞:** *(Promise<void>)* ‚Äî Promise –∫–æ–π—Ç–æ —Å–µ —Ä–∞–∑—Ä–µ—à–∞–≤–∞ –∫–æ–≥–∞—Ç–æ –ø—Ä–æ—Ü–µ—Å—ä—Ç –Ω–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞–Ω–µ –∑–∞–≤—ä—Ä—à–∏

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏:** –©–µ –ª–æ–≥–≤–∞ –≥—Ä–µ—à–∫–∏ –∑–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–Ω–∏ –Ω–µ—É—Å–ø–µ—à–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ —á–∞—Å—Ç–∏ –Ω–æ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ —Å –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ —á–∞—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä:**
\`\`\`typescript
await ragTool.indexDocument('/–ø—ä—Ç/–∫—ä–º/–¥–æ–∫—É–º–µ–Ω—Ç.md', '–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ç—É–∫...');
\`\`\`

---

##### searchSimilar(query: string, topK?: number): Promise<SearchResult[]>

**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢—ä—Ä—Å–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –ø–æ–¥–æ–±–Ω–∏ –Ω–∞ –¥–∞–¥–µ–Ω–∞—Ç–∞ –∑–∞—è–≤–∫–∞ –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ –ø–æ–¥–æ–±–∏–µ.

–¢–æ–∑–∏ –º–µ—Ç–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä–∞ embedding –∑–∞ –≤—Ö–æ–¥–Ω–∞—Ç–∞ –∑–∞—è–≤–∫–∞ –∏ —è —Å—Ä–∞–≤–Ω—è–≤–∞ —Å—Ä–µ—â—É –≤—Å–∏—á–∫–∏ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏ document embedding-–æ–≤–µ –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ cosine similarity. –†–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ —Å–µ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞—Ç –∑–∞ –∏–∑–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –º–Ω–æ–≥–æ –Ω–∏—Å–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç scores –∏ —Å–µ —Å–æ—Ä—Ç–∏—Ä–∞—Ç –ø–æ similarity score –≤ –Ω–∏–∑—Ö–æ–¥—è—â —Ä–µ–¥.

**–¢–∏–ø–æ–≤–∞ –¥–µ—Ñ–∏–Ω–∏—Ü–∏—è:**
\`\`\`typescript
interface SearchResult {
  text: string;
  score: number;
  metadata: {
    file_name: string;
    file_path: string;
    chunk_index: number;
  };
}
\`\`\`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- \`query\` *(string)* ‚Äî –ù–∏–∑—ä—Ç –∑–∞—è–≤–∫–∞ –∑–∞ –Ω–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –ø–æ–¥–æ–±–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏
- \`topK\` *(number)* ‚Äî –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –±—Ä–æ–π –Ω–∞–π-–ø–æ–¥–æ–±–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∑–∞ –≤—Ä—ä—â–∞–Ω–µ (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ: 3)

**–í—Ä—ä—â–∞:** *(Promise<SearchResult[]>)* ‚Äî Promise —Ä–∞–∑—Ä–µ—à–∞–≤–∞—â —Å–µ –∫—ä–º –º–∞—Å–∏–≤ –æ—Ç –ø–æ–¥–æ–±–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ —Å —Ç–µ—Ö–Ω–∏—Ç–µ similarity scores –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω–∏

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í—Ä—ä—â–∞ —Å–∞–º–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏ —Å similarity score > 0.1 –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
- –ì—Ä–µ—à–∫–∏ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ embedding-–æ–≤–µ —Å–µ –ª–æ–≥–≤–∞—Ç –∏ –∑–∞—Å–µ–≥–Ω–∞—Ç–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –ø–æ–ª—É—á–∞–≤–∞—Ç score 0
- –†–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ —Å–µ —Å–æ—Ä—Ç–∏—Ä–∞—Ç –ø–æ similarity score –≤ –Ω–∏–∑—Ö–æ–¥—è—â —Ä–µ–¥ (–Ω–∞–π-–≤–∏—Å–æ–∫–∏ –ø—ä—Ä–≤–∏)
- –ú–µ—Ç–∞–¥–∞–Ω–Ω–∏—Ç–µ –≤–∫–ª—é—á–≤–∞—Ç —Ñ–∞–π–ª–æ–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ chunk –∏–Ω–¥–µ–∫—Å –∑–∞ –ø—Ä–æ—Å–ª–µ–¥–∏–º–æ—Å—Ç –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ç–µ

**–ü—Ä–∏–º–µ—Ä:**
\`\`\`typescript
const results = await ragTool.searchSimilar("–∞–ª–≥–æ—Ä–∏—Ç–º–∏ –∑–∞ –º–∞—à–∏–Ω–Ω–æ –æ–±—É—á–µ–Ω–∏–µ", 5);
console.log(results[0].text); // –ù–∞–π-–ø–æ–¥–æ–±–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç
console.log(results[0].score); // Similarity score (0-1)
console.log(results[0].metadata.file_name); // –ò–º–µ –Ω–∞ —Ñ–∞–π–ª–∞ –∏–∑—Ç–æ—á–Ω–∏–∫
\`\`\`

---

### ragSQLiteTool

**–û–ø–∏—Å–∞–Ω–∏–µ:** SQLite-–±–∞–∑–∏—Ä–∞–Ω RAG (Retrieval-Augmented Generation) –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ –±—ä—Ä–∑–æ —Ç—ä—Ä—Å–µ–Ω–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.

–¢–æ–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Å–∏–≥—É—Ä—è–≤–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–∏ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –∑–∞ AI –∞–≥–µ–Ω—Ç –∏ RAG —Å–∏—Å—Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ –≤–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∫–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ embedding-–æ–≤–µ. –ü–æ–¥–¥—ä—Ä–∂–∞ –∑–∞—è–≤–∫–∏ –∫–∞–∫—Ç–æ –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏, —Ç–∞–∫–∞ –∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏ –µ–∑–∏–∫ –∏ –º–æ–∂–µ –¥–∞ –æ—Ç–≥–æ–≤–∞—Ä—è –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ –æ—Ç–Ω–æ—Å–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –∞–≥–µ–Ω—Ç–∏, RAG –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è, –≤–µ–∫—Ç–æ—Ä–Ω–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∏ –¥—Ä—É–≥–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:**
\`\`\`typescript
{
  name: 'ragSQLiteTool',
  description: '–û–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω SQLite RAG –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ –±—ä—Ä–∑–æ —Ç—ä—Ä—Å–µ–Ω–µ...',
  parameters: z.object({
    query: z.string().describe('–ó–∞—è–≤–∫–∞—Ç–∞ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –∑–∞ lookup –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞.')
  })
}
\`\`\`

**–§—É–Ω–∫—Ü–∏–∏:**
- –í–µ–∫—Ç–æ—Ä–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ –ø–æ –ø–æ–¥–æ–±–∏–µ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –±—Ä–æ–π —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –∫–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ embedding-–æ–≤–µ –∑–∞ –ø–æ–¥–æ–±—Ä–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏ –∑–∞—è–≤–∫–∏
- –ú–Ω–æ–≥–æ–µ–∑–∏—á–Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ (–±—ä–ª–≥–∞—Ä—Å–∫–∏ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏)
- Fallback –º–µ—Ö–∞–Ω–∏–∑—ä–º –∫—ä–º –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–æ —Ç—ä—Ä—Å–µ–Ω–µ –∞–∫–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ—Ç–æ —Ç—ä—Ä—Å–µ–Ω–µ —Å–µ –ø—Ä–æ–≤–∞–ª–∏
- –ù–∞–±–ª—é–¥–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ —Å –≤—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –∏ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç score
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ –ø—Ä–∞–≥ –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ: 0.2)

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç:**
- –ó–Ω–∞—á–∏—Ç–µ–ª–Ω–æ –ø–æ-–±—ä—Ä–∑–æ –æ—Ç –Ω–µ-–∫–µ—à–∏—Ä–∞–Ω–∏ –ø–æ–¥—Ö–æ–¥–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏ –∑–∞—è–≤–∫–∏
- –í—Ä—ä—â–∞ —Ç–æ–ø 3 –Ω–∞–π-—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
- –§–∏–ª—Ç—Ä–∏—Ä–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç score –∑–∞ –æ—Å–∏–≥—É—Ä—è–≤–∞–Ω–µ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ

**Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
–ê–∫–æ –æ—Å–Ω–æ–≤–Ω–æ—Ç–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ —Å–µ –ø—Ä–æ–≤–∞–ª–∏, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ –≤—Ä—ä—â–∞ –∫—ä–º:
1. –ü—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–æ —Ç—ä—Ä—Å–µ–Ω–µ –≤ markdown —Ñ–∞–π–ª–æ–≤–µ
2. Keyword matching –∑–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –∏ prerequisite –∑–∞—è–≤–∫–∏
3. Graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∏ —Å—ä–æ–±—â–µ–Ω–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- \`query\` *(string)* ‚Äî –ù–∏–∑—ä—Ç –∑–∞—è–≤–∫–∞ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞

**–í—Ä—ä—â–∞:** *(string)* ‚Äî –ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω —Ç–µ–∫—Å—Ç –æ—Ç –Ω–∞–π-—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç scores

**–ü—Ä–∏–º–µ—Ä:**
\`\`\`typescript
const result = await ragSQLiteTool.execute({ 
  query: "–ö–∞–∫ –¥–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–º wasm-pack prerequisites?" 
});
\`\`\``
      }
    };

    // DOM elements
    const fileList = document.getElementById('fileList');
    const docContainer = document.getElementById('docContainer');
    const langSelect = document.getElementById('langSelect');

    // Enhanced markdown renderer
    function renderMarkdown(markdown) {
      const lines = markdown.split('\n');
      let html = '';
      let inCodeBlock = false;
      let codeLanguage = '';
      let inList = false;
      
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        const trimmed = line.trim();
        
        // Handle code blocks
        if (trimmed.startsWith('```')) {
          if (!inCodeBlock) {
            inCodeBlock = true;
            codeLanguage = trimmed.slice(3);
            html += '<pre><code>';
          } else {
            inCodeBlock = false;
            html += '</code></pre>';
          }
          continue;
        }
        
        if (inCodeBlock) {
          html += escapeHtml(line) + '\n';
          continue;
        }
        
        // Handle lists
        if (trimmed.startsWith('- ')) {
          if (!inList) {
            html += '<ul>';
            inList = true;
          }
          html += '<li>' + processInlineFormatting(trimmed.slice(2)) + '</li>';
          continue;
        } else if (inList) {
          html += '</ul>';
          inList = false;
        }
        
        // Handle headings
        if (trimmed.startsWith('#')) {
          const level = trimmed.match(/^#+/)[0].length;
          const text = trimmed.slice(level).trim();
          html += `<h${level}>${processInlineFormatting(text)}</h${level}>`;
          continue;
        }
        
        // Handle horizontal rules
        if (trimmed === '---') {
          html += '<hr>';
          continue;
        }
        
        // Handle paragraphs
        if (trimmed) {
          html += '<p>' + processInlineFormatting(trimmed) + '</p>';
        }
      }
      
      // Close any open lists
      if (inList) {
        html += '</ul>';
      }
      
      return html;
    }
    
    function processInlineFormatting(text) {
      // Process inline code first
      text = text.replace(/\`([^\`]+)\`/g, '<code>$1</code>');
      
      // Process bold
      text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
      
      // Process italic
      text = text.replace(/\*([^*]+)\*/g, '<em>$1</em>');
      
      return text;
    }
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function setActiveFile(fileKey) {
      // Update active state
      document.querySelectorAll('.file-item').forEach(item => {
        item.classList.toggle('active', item.dataset.file === fileKey);
      });
      
      // Get language and content
      const lang = langSelect.value;
      const content = docs[fileKey][lang] || docs[fileKey].en;
      
      // Render content
      const html = renderMarkdown(content);
      docContainer.innerHTML = `<div class="markdown-content">${html}</div>`;
    }

    // Event listeners
    fileList.addEventListener('click', (e) => {
      const fileItem = e.target.closest('.file-item');
      if (fileItem) {
        setActiveFile(fileItem.dataset.file);
      }
    });

    langSelect.addEventListener('change', () => {
      const activeFile = document.querySelector('.file-item.active');
      if (activeFile) {
        setActiveFile(activeFile.dataset.file);
      }
    });

    // Initialize with first file
    setTimeout(() => {
      const firstFile = document.querySelector('.file-item');
      if (firstFile) {
        setActiveFile(firstFile.dataset.file);
      }
    }, 100);
  </script>
</body>
</html>
